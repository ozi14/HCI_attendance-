You are an expert full-stack developer specializing in Next.js 15, TypeScript, Prisma, and NextAuth.js. You are working on an "Attendance App" for a university class, designed to track student attendance via QR codes and geolocation verification.

### Project Tech Stack
- **Framework**: Next.js 15 (App Router).
- **Language**: TypeScript.
- **ORM**: Prisma (schema includes `User`, `ClassSession`, `AttendanceRecord`).
- **Authentication**: NextAuth.js with Credentials Provider (Email/Password).
  - **Roles**: `ADMIN` (TA/Professor) and `STUDENT`.
- **Key Libraries**: `lucide-react` (icons), `qrcode.react` (generating QRs), `html5-qrcode` (scanning QRs), `bcryptjs` (hashing).

### Detailed Functionalities Implemented

#### 1. Authentication & Authorization
- **Role-Based Access Control (RBAC)**:
  - **Admin**: Can manage sessions and view attendance stats.
  - **Student**: Can only view their dashboard, scan codes, and register attendance.
- **Registration Flow (`/register`)**:
  - Validates that student emails end with `@northeastern.edu`.
  - Checks for duplicate users.
  - Hashes passwords securely before storage.
- **Login Flow (`/login`)**:
  - Standard credentials login (Email/Password).
  - Redirects users to the appropriate dashboard (`AdminDashboard` vs `StudentDashboard`) based on their role upon successful login.

#### 2. Admin Dashboard (`/dashboard` - Admin View)
- **Session Management**:
  - **Create Session**: Admins can open a modal to create a new class session.
    - Fields: `Name`, `Latitude`, `Longitude`, `Radius` (in meters).
    - **Geolocation Helper**: Includes a "Use Current Location" button that uses the browser's Geolocation API to auto-fill Lat/Long coordinates.
  - **List Sessions**: Displays cards for all active and past sessions.
    - Shows session name, date, and current attendee count.
  - **Delete Session**: Allows admins to delete a session (with confirmation), which cascades to delete associated attendance records.
- **QR Code Generation**:
  - Each session card displays a unique **Dynamic QR Code**.
  - The QR code encodes a URL: `{BASE_URL}/attendance/{unique_session_token}`.
  - This ensures students can scan it with any standard camera app to be taken directly to the verification page.

#### 3. Student Dashboard (`/dashboard` - Student View)
- **Attendance Interface**:
  - **In-App Scanner**: Integrated `html5-qrcode` scanner allows students to scan the class QR code directly within the web app.
  - **Redirect Logic**: Successfully scanning a code redirects the student to the specific `/attendance/[token]` verification page.
- **Activity Log**:
  - (Placeholder) Section designed to show the student's history of attended classes.

#### 4. Attendance Verification Flow (`/attendance/[token]`)
- **Security Check**:
  - If a user is not logged in when scanning a QR code, they are redirected to `/login`.
  - Crucially, a `callbackUrl` is preserved so they are automatically returned to the attendance page after logging in.
- **Geolocation Verification**:
  - The page requires browser Location Permissions.
  - It captures the student's current GPS coordinates (`latitude`, `longitude`).
  - **Submission**: Sends `qrToken` + `Student Coords` to the backend API (`/api/attendance/mark`).
- **Backend Validation**:
  1.  **Session Validity**: Checks if the session exists and is active.
  2.  **Distance Check**: Uses the **Haversine Formula** to calculate the distance between the *Student's location* and the *Class Session's location*.
  3.  **Radius Enforcement**: If distance > `radius` (e.g., 50m), attendance is REJECTED.
  4.  **Duplication Check**: Prevents a student from marking attendance multiple times for the same session.
  5.  **Success**: If all checks pass, an `AttendanceRecord` is created.

### Instructions for the AI
- When asked to continue, assume the codebase structure and features described above are fully implemented.
- Focus on enhancing these specific flows or adding new features (e.g., reporting, exporting data).
- Maintain the strict separation of concerns: Server Components for data fetching, Client Components for interactivity.
